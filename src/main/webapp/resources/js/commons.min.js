function addDatsToDictionary(a,b,c){var d=b.spatialCoverage[0].identifier.identifier;d.includes("http")||(d=b.spatialCoverage[0].identifier.identifierSource),a[c]={title:b.title,description:b.description,identifier:d,landingPage:b.distributions[0].access.landingPage,accessUrl:b.distributions[0].access.accessURL,json:b};for(var e=[],f=0;f<b.creators.length;f++){var g=b.creators[f];g=g.firstName+" "+g.lastName,e.push(g)}var h=b.distributions[0].access.authorizations,i=[];if(null!=h){for(var f=0;f<h.length;f++)i.push(h[f].value);a[c].authorizations=i}var j=b.distributions;if(null!=j&&j.length>0){"MIDAS Digital Commons"==j[0].storedIn.name&&(a[c].availableOnOlympus=!0)}a[c].creator=e}function populateSyntheticEcosystemDictionary(a){var b=fipsCodes[a];$.getJSON(ctx+"/resources/spew-dats-json/"+b+".json?v="+Date.now(),function(c){addDatsToDictionary(syntheticEcosystemsDictionary,c,b),++a<fipsCodes.length&&populateSyntheticEcosystemDictionary(a)})}function populateSynthiaPopulationsDictionary(a){var b=["synthia_us_by_county","synthia_us_by_state"];$.getJSON(ctx+"/resources/synthia-dats-json/"+b[a]+".json?v="+Date.now(),function(c){var d=b[a].split("_"),e=d[d.length-1];addDatsToDictionary(synthiaPopulationsDictionary,c,e),++a<b.length&&populateSynthiaPopulationsDictionary(a)})}function hardcodeFromJson(a,b,c,d,e,f,g,h){$.getJSON(a+b+"?v="+Date.now(),function(e){for(var i=new Set,j=new Set,k=0;k<e.length;k++)i.add(e[k].subtype),e[k].hasOwnProperty("product")&&j.add(e[k].subtype+"--\x3e"+e[k].product);i=Array.from(i),j=Array.from(j),null==i[0]&&(i=[]),null==j[0]&&(j=[]);for(var l=JSON.parse(JSON.stringify(i)),k=0;k<j.length;k++){for(var m=j[k].split("--\x3e"),n=0;n<i.length;n++){var o=i[n];"string"!=typeof i[n]&&(o=Object.keys(i[n])[0]),m[0]==o&&("string"==typeof i[n]?(i[n]={},i[n][m[0]]=[m[1]]):i[n][o].push(m[1]))}l.push(m[1].replace(/\s*\(.*?\)\s*/g,""))}if(b.includes("hardcoded-software.json"))for(var k in i){var p=i[k];"string"!=typeof p&&(p=Object.keys(p)[0]),$("#category-select").append($("<option>",{value:p,text:"Software - "+p}))}addTreeDirectories(i,c),addTreeNodes(h,e,d,c),buildBootstrapTree(h,a,c,f,g,d,l),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})})}function addTreeDirectories(a,b){for(var c=0;c<a.length;c++)if("string"==typeof a[c])b.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+a[c]+"</span>",nodes:[],name:a[c]});else{for(var d=Object.keys(a[c]),e=d[0],f=[],g=0;g<a[c][e].length;g++)f.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+a[c][e][g],nodes:[],name:a[c][e][g]});b.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+e+"</span>",nodes:f,name:e})}}function addTreeNodes(a,b,c,d){for(var e in b)if(c[e]=b[e],"subtype"in c[e])addNodesToDirectory(a,e,d,c);else if("settings"!=e&&"EpiCaseMap"!=e){var f=getNodeData(a,e,c);f.nodes=[],d.push(f)}}function buildBootstrapTree(a,b,c,d,e,f,g){for(var h=0;h<c.length;h++)"nodes"in c[h]&&c[h].nodes.sort(compareNodes);"software"!=a&&c.sort(compareNodes);var i={data:c,showBorder:!1,collapseAll:!0,expandIcon:"glyphicon glyphicon-chevron-right",collapseIcon:"glyphicon glyphicon-chevron-down",onNodeSelected:function(a,c){void 0!=typeof c.nodes&&$(d).treeview("toggleNodeExpanded",[c.nodeId,{levels:1,silent:!0}]).treeview("unselectNode",[c.nodeId,{silent:!0}]);var f=$.parseJSON(sessionStorage.getItem(e));if(c.state.expanded){if(null!=f){var g=f.indexOf(c.nodeId);g>-1&&f.splice(g,1)}}else if(null!=f){var g=f.indexOf(c.nodeId);g<=-1&&f.push(c.nodeId)}else f=[],f.push(c.nodeId);sessionStorage.setItem(e,JSON.stringify(f)),null!=c.url&&1==c.state.selected&&(ga("send",{hitType:"event",eventCategory:"Clickthrough",eventAction:c.url}),"signInRequired"in c&&1==c.signInRequired?$(location).attr("href",b+"/midas-sso/view?url="+encodeURIComponent(c.url)):window.location.href=c.url)}};"diseaseTransmissionModels"==a||"systemSoftware"==a||"tools"==a?(i.expandIcon="bullet-point\t",i.collapseIcon="bullet-point\t",i.highlightSelected=!1,i.onNodeSelected=function(a,b){$('[data-toggle="tooltip"]').tooltip("destroy"),a.stopPropagation()},$(d).treeview(i),$(d).treeview("expandAll",{silent:!0})):("webServices"!=a&&"dataFormats"!=a||(i.expandIcon="bullet-point\t",i.collapseIcon="bullet-point\t"),$(d).treeview(i),$(d).treeview("collapseAll",{silent:!0}));var j=$.parseJSON(sessionStorage.getItem(e)),k=[];if(null==j){for(var l=[],h=0;h<g.length;h++){var m=$(d).treeview("search",[g[h],{ignoreCase:!1,exactMatch:!1,revealResults:!1}])[0];$(d).treeview("clearSearch"),null!=m&&l.push(m.nodeId)}j=l,sessionStorage.setItem(e,JSON.stringify(l))}if(null!=j){for(var h=0;h<j.length;h++)try{$(d).treeview("expandNode",[j[h],{silent:!0}])}catch(a){k.push(h)}if(k.length>0){for(var h=0;h<k.length;h++)j.splice(k[h],1);sessionStorage.setItem(e,JSON.stringify(j))}}}function addNodesToDirectory(a,b,c,d){for(var e=0;e<c.length;e++){var f=[],g=[];addNodesToSubdirectories(c[e],f,g);var h=f.indexOf(d[b].product);if(c[e].name==d[b].subtype||h>-1){var i=getNodeData(a,b,d);h>-1?(g[h].nodes.push(i),g[h].nodes.sort(compareNodes)):c[e].nodes.push(i);break}}}function addNodesToSubdirectories(a,b,c){if("nodes"in a)for(var d in a.nodes)"nodes"in a.nodes[d]&&(b.push(a.nodes[d].name),c.push(a.nodes[d]))}function getNodeData(a,b,c){var d=b;d="version"in c[b]?getSoftwareTitle(c[b].title,c[b].version.join(", ")):c[b].title;var e={text:'<span onmouseover="toggleTitle(this)" onclick="openModal(\''+a+"','"+b+"')\">"+d+"</span>",name:d};if("availableOnOlympus"in c[b]&&1==c[b].availableOnOlympus&&(e.text+=' <b><i class="olympus-color"><sup>AOC</sup></i></b>'),"availableOnUIDS"in c[b]&&1==c[b].availableOnOlympus&&(e.text+=' <b><i class="udsi-color"><sup>UIDS</sup></i></b>'),"signInRequired"in c[b]&&1==c[b].signInRequired&&(e.text+=' <b><i class="sso-color"><sup>SSO</sup></i></b>'),"redirect"in c[b]&&1==c[b].redirect){var f="";"source"in c[b]&&(f=c[b].source),"website"in c[b]&&(f=c[b].website),f.length>0&&(e.url=f,e.text='<span onmouseover="toggleTitle(this)">'+d+"</span>","availableOnOlympus"in c[b]&&1==c[b].availableOnOlympus&&(e.text+=' <b><i class="olympus-color"><sup>AOC</sup></i></b>'),"availableOnUIDS"in c[b]&&1==c[b].availableOnOlympus&&(e.text+=' <b><i class="udsi-color"><sup>UIDS</sup></i></b>'),"signInRequired"in c[b]&&1==c[b].signInRequired&&(e.text+=' <b><i class="sso-color"><sup>SSO</sup></i></b>',e.signInRequired=c[b].signInRequired))}return"software"!=a&&"webServices"!=a&&"dataFormats"!=a&&(e.text="<span data-placement='auto right' data-container='body' data-toggle='tooltip' title='"+c[b].description+"'>"+d+"</span>"),e}function getSoftwareTitle(a,b){var c=a,d=c.split(" "),e=d[d.length-1];return 3==e.length&&e.startsWith("[")&&e.endsWith("]")&&(c=d.slice(0,d.length-1).join(" ")),b=b.split(" - ")[0],isNaN(b[0])?c+=" - "+b:c+=" - v"+b,c}function getDataAndKnowledgeTree(a,b,c,d){var e=[];return c+="main/",e.push(b,{text:"Synthia™ synthetic populations",nodes:[{text:'<span onmouseover=\'toggleTitle(this)\' onclick=\'openModal("syntheticPopulations","county")\'>2010 U.S. Synthetic Populations by County</span> <b><i class="olympus-color"><sup>AOC</sup></i></b>'},{text:'<span onmouseover=\'toggleTitle(this)\' onclick=\'openModal("syntheticPopulations","state")\'>2010 U.S. Synthetic Populations by State</span> <b><i class="olympus-color"><sup>AOC</sup></i></b>'}]},{text:"Disease surveillance data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>Brazil Ministry of Health</span>",url:"http://www2.datasus.gov.br/DATASUS/index.php?area=0203"},{text:"<span onmouseover='toggleTitle(this)'>CDCEpi Zika Github</span>",url:"https://zenodo.org/record/192153#.WIEKNLGZNcA"},{text:"<span onmouseover='toggleTitle(this)'>Colombia Ministry of Health</span>",url:"http://www.ins.gov.co/lineas-de-accion/Subdireccion-Vigilancia/sivigila/Paginas/vigilancia-rutinaria.aspx"},{text:"<span onmouseover='toggleTitle(this)'>Singapore Ministry of Health</span>",url:"https://www.moh.gov.sg/content/moh_web/home/diseases_and_conditions.html"},{text:"<span onmouseover='toggleTitle(this)'>US notifiable diseases</span>",nodes:[{text:"<span onmouseover='toggleTitle(this)'>MMWR morbidity and mortality tables through data.cdc.gov</span>",url:"https://data.cdc.gov/browse?category=MMWR"},{text:"<span onmouseover='toggleTitle(this)'>Tycho 2.0</span>",url:"https://www.tycho.pitt.edu/"}]}]},{text:"Mortality data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US cause of death 1995-2015</span>",url:"https://wonder.cdc.gov/controller/datarequest/D76"},{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US compressed mortality files</span>",url:"https://wonder.cdc.gov/mortSQL.html"}]}),null!=a&&$.each(a,function(a,b){var d;d=a.includes("Epidemic")?c+"epidemic/":a.includes("Case series")?c+"caseSeries/":c+"infectiousDiseaseScenario/";var f=[];$.each(b,function(a,b){var c=[],e=!1;"Ebola epidemics"==a&&(e=!0),$.each(b,function(a,b){if(e){var f=b.name;f.includes("É")&&(f=f.replace("É","E")),c.push({name:b.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"epidemics\",\""+f+"\")'>"+b.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/ebola-dats-json/"+f+".json?v="+Date.now(),function(a){addDatsToDictionary(epidemicsDictionary,a,f)}).error(function(a){console.log("error")})}else c.push({text:"<span onmouseover='toggleTitle(this)'>"+b.name+' <b><i class="ae-color"><sup>AE</sup></i><b> </span> ',url:d+b.urn})}),(a.includes("Zika")||a.includes("Chikungunya"))&&(a+=" (under development)"),a.includes("H1n1 infectious disease scenarios")&&(a="H1N1 infectious disease scenarios"),f.push({text:"<span onmouseover='toggleTitle(this)'>"+a+' <b><i class="ae-color"><sup>AE</sup></i><b> </span>',nodes:c})}),e.push({text:"<span onmouseover='toggleTitle(this)'>"+a+"</span>",nodes:f})}),e.push(standardIdentifierTree),e}function openViewer(a){window.open(a)}function toggleModalItem(a,b,c,d,e){if(a in b&&null!=b[a]){var f=b[a];"[object Array]"===Object.prototype.toString.call(f)&&(f=f[0].includes("<ul")||f[0].includes("<br>")?f.join(""):f.join(", ")),$("#software-"+c+"-container").show(),e?$("#software-"+c).html(f):$("#software-"+c).text(f),d&&$("#software-"+c).attr("href",f)}else $("#software-"+c+"-container").hide()}function toggleRequiredModalItem(a,b,c,d,e,f){if(a in b){var g=b[a];"[object Array]"===Object.prototype.toString.call(g)&&(g=g.join(", ")),$("#software-"+c+"-container").show(),e?$("#software-"+c).html(g):$("#software-"+c).text(g),d&&$("#software-"+c).attr("href",g)}else"software"==f?($("#software-"+c+"-container").show(),$("#software-"+c).html("N/A")):$("#software-"+c+"-container").hide()}function openModal(a,b){var c={};if("software"==a?(c=softwareDictionary[b],b=c.title,ga("send",{hitType:"event",eventCategory:"User Activity",eventAction:"Software - "+b})):"webServices"==a?(c=webservicesDictionary[b],b=c.title,ga("send",{hitType:"event",eventCategory:"User Activity",eventAction:"Web Services - "+b})):"syntheticEcosystems"==a||"epidemics"==a||"syntheticPopulations"==a?("syntheticEcosystems"==a?(c=syntheticEcosystemsDictionary[b],stateHash.hasOwnProperty(b)?b=stateHash[b]:countryHash.hasOwnProperty(b)&&(b=countryHash[b])):"epidemics"==a?(c=epidemicsDictionary[b],b=c.title.replace(" data and knowledge","")):"syntheticPopulations"==a&&(c=synthiaPopulationsDictionary[b],b=c.title),$("#mdc-json").hide(),$("#dats-json").show(),$("#modal-switch-btn").show(),$("#display-json").text(JSON.stringify(c.json,null,"\t"))):"dataFormats"==a&&(c=dataFormatsDictionary[b]),"software"!=a&&"webServices"!=a&&"dataFormats"!=a||($("#dats-json").hide(),$("#mdc-json").show(),$("#modal-switch-btn").show(),$("#display-json").text(JSON.stringify(c,null,4))),null!=b?($("#software-name").show(),"version"in c?$("#software-name").text(getSoftwareTitle(b,c.version.join(", "))):$("#software-name").text(b)):$("#software-name").hide(),"developers"in c){var d=c.developers,e=d.length;d=d.join(", "),$("#software-developer-container").show(),$("#software-developer").html(d),e>1?$("#software-developer-tag").text("Developers:"):$("#software-developer-tag").text("Developer:")}else $("#software-developer-container").hide();if("creator"in c){var d=c.creator,e=d.length;d=d.join(", "),$("#software-creator-container").show(),$("#software-creator").html(d),e>1?$("#software-creator-tag").text("Creators:"):$("#software-creator-tag").text("Creator:")}else $("#software-creator-container").hide();if("version"in c){var d=c.version,e=d.length;d=d.join(", "),$("#software-version-container").show(),$("#software-version").text(d),e>1&&"software"==a?$("#software-version-tag").text("Software versions:"):$("#software-version-tag").text("Software version:"),e>1&&"webServices"==a?$("#software-version-tag").text("Versions:"):$("#software-version-tag").text("Version:")}else"syntheticEcosystems"!=a&&"epidemics"!=a&&"syntheticPopulations"!=a?$("#software-version").text("N/A"):$("#software-version-container").hide();toggleRequiredModalItem("doi",c,"doi",!1,!0,a),toggleRequiredModalItem("dataInputFormats",c,"data-input-formats",!1,!0,a,!0),toggleRequiredModalItem("dataOutputFormats",c,"data-output-formats",!1,!0,a,!0),toggleModalItem("type",c,"type",!1,!1),toggleModalItem("populationSpeciesIncluded",c,"population-species",!1,!1),toggleModalItem("source",c,"source-code",!0,!1),toggleModalItem("pathogenCoverage",c,"pathogen-coverage",!1,!1),toggleModalItem("locationCoverage",c,"location-coverage",!1,!1),toggleModalItem("speciesIncluded",c,"species-included",!1,!1),toggleModalItem("hostSpeciesIncluded",c,"host-species-included",!1,!1),toggleModalItem("controlMeasures",c,"control-measures",!1,!1),toggleModalItem("humanReadableSynopsis",c,"human-readable-synopsis",!1,!0),toggleModalItem("sourceCodeRelease",c,"source-code-release",!1,!0),toggleModalItem("publicationsAboutRelease",c,"publications-about-release",!1,!0),toggleModalItem("publicationsThatUsedRelease",c,"publications-that-used-release",!1,!0),toggleModalItem("webApplication",c,"web-application",!0,!1),toggleModalItem("userGuidesAndManuals",c,"user-guides-and-manuals",!0,!1),toggleModalItem("executables",c,"executables",!1,!0),toggleModalItem("license",c,"license",!1,!0),toggleModalItem("endpointPrefix",c,"end-point-prefix",!0,!1),toggleModalItem("documentation",c,"documentation",!1,!0),toggleModalItem("restDocumentation",c,"rest-documentation",!0,!1),toggleModalItem("soapDocumentation",c,"soap-documentation",!0,!1),toggleModalItem("soapEndpoint",c,"soap-endpoint",!0,!1),toggleModalItem("projectSource",c,"project-source-code",!0,!1),toggleModalItem("soapSource",c,"rest-source-code",!0,!1),toggleModalItem("restSource",c,"soap-source-code",!0,!1),toggleModalItem("exampleQueries",c,"example-queries",!1,!0),toggleModalItem("diseases",c,"diseases",!1,!1),toggleModalItem("region",c,"region",!1,!0),toggleModalItem("locations",c,"locations",!1,!0),toggleModalItem("pathogens",c,"pathogens",!1,!0),toggleModalItem("outcomes",c,"outcomes",!1,!0),toggleModalItem("forecasts",c,"forecasts",!1,!0),toggleModalItem("nowcasts",c,"nowcasts",!1,!0),toggleModalItem("website",c,"website",!0,!1),toggleModalItem("forecastFrequency",c,"forecast-frequency",!1,!1),toggleModalItem("visualizationType",c,"visualization-type",!1,!1),toggleModalItem("grants",c,"grant",!1,!1),toggleModalItem("platform",c,"platform",!1,!1),toggleModalItem("description",c,"description",!1,!1),toggleModalItem("identifier",c,"identifier",!0,!1),toggleModalItem("landingPage",c,"landing-page",!0,!1),toggleModalItem("accessUrl",c,"access-url",!0,!1),toggleModalItem("authorizations",c,"authorizations",!1,!1),$("#pageModal").modal("show")}function formatLocation(a){if(a.includes("_"))var b=a.split("_");else var b=a.split(" ");for(var c=0;c<b.length;c++){var d=0;"("==b[c].charAt(0)&&(d=1),"of"!=b[c].replace(/["'\(\)]/g,"")&&(b[c]=b[c].charAt(d).toUpperCase()+b[c].slice(d+1),1==d&&(b[c]="("+b[c]))}return b.join(" ")}function openSoftwareInfo(a,b){location.href=a+"/main/software/"+b}function openLibraryFrame(a){document.getElementById("libraryFrame").parentNode.style.display="",document.getElementById("commons-main-body").style.display="none",document.getElementById("commons-main-tabs").style.display="none",window.open(a,"libraryFrame")}function compareNodes(a,b){return a.name.trim().toLowerCase()<b.name.trim().toLowerCase()?-1:a.name.trim().toLowerCase()>b.name.trim().toLowerCase()?1:0}function toggleTitle(a){var b=$(a);b[0].parentNode.offsetWidth<b[0].parentNode.scrollWidth||b[0].offsetWidth<b[0].scrollWidth?b.attr("title",b.text()):b.attr("title","")}function activeTab(a){$('.tabs a[href="#'+a+'"]').tab("show"),location.hash=a,a.includes("publication")?$("#data-and-knowledge-tab").addClass("highlighted-item"):$("#data-and-knowledge-tab").removeClass("highlighted-item")}function getWebServicesTreeview(){var a=[];return a.push({text:"WebServices placeholder",nodes:[]}),a}function getSoftwareEnvironmentTreeview(){var a=[];return a.push({text:"Software environment placeholder",nodes:[]}),a}function getDiseaseTransmissionModelTreeview(){var a=[];return a.push({text:"Disease transmission model placeholder",nodes:[]}),a}function getToolsTreeview(){var a=[];return a.push({text:"Statistical analysis software"},{text:"Image manipulation"}),a}function init(){for(var a=document.getElementsByTagName("iframe"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}function convertDateNumToString(a){return a<10?a="0"+a:a+="",a}function getFormattedDate(){var a=new Date,b=a.getYear()-100,c=a.getMonth()+1,d=a.getDate(),e=a.getMinutes(),f=a.getSeconds();return b=convertDateNumToString(b),c=convertDateNumToString(c),d=convertDateNumToString(d),e=convertDateNumToString(e),f=convertDateNumToString(f),b+c+d+e+f}function drawDiagram(){var a=$("input[name=synthpop]:checked").val(),b=$("input[name=dtm]:checked").val(),c=$("#olympus-username").val(),d=$("#location-select").val().split("_"),f=(formatLocation(d[0]),d[1]);if(null!=f&&null!=a&&null!=b){var g="<username>";null!=c&&""!=c.trim()&&(g=c);var h=f+"_"+b+"_"+getFormattedDate();$("#submit-lsdtm-script").text("/mnt/lustre0/data/shared_group_data/syneco/spew2synthia/scripts/lsdtm.sh -p spew_1.2.0_"+f+" -o "+h),$("#example-submit-lsdtm-script").text("-bash-4.2$ /mnt/lustre0/data/shared_group_data/syneco/spew2synthia/scripts/lsdtm.sh -p spew_1.2.0_"+f+" -o /home/"+g+"/test\n557925.pbs.olympus.psc.edu"),$("#status-lsdtm-script").text("qstat | grep "+g),$("#example-status-lsdtm-script").text("-bash-4.2$ qstat | grep "+g+"\n557925.pbs.olympus.psc.edu ..._spew2synthia "+g+"        00:33:37 R batch"),$("#view-output-lsdtm-script").text("ls "+h),$("#example-view-output-lsdtm-script").text("-bash-4.2$ ls /home/"+g+"/test\nfred_spew2synthia.e557925  fred_spew2synthia.o557925  OUT  params"),$("#view-error-lsdtm-script").text("cat "+h+"/fred_spew2synthia.e######"),$("#example-view-error-lsdtm-script").text("-bash-4.2$ cat /home/"+g+"/fred_spew2synthia.e557925\n\nThe following have been reloaded with a version change:\n1) gcc/4.8.3 => gcc/6.1.0"),$("#view-stdout-lsdtm-script").text("tail "+h+"/fred_spew2synthia.o######"),$("#example-view-stdout-lsdtm-script").text("-bash-4.2$ tail /home/"+g+"/fred_spew2synthia.o557925\n\nday 239 report population took 0.000115 seconds\nday 239 maxrss 4068524\nday 239 finished Fri Apr  7 14:53:10 2017\nDAY_TIMER day 239 took 0.002799 seconds\n\n\nFRED simulation complete. Excluding initialization, 240 days took 0.493485 seconds\nFRED finished Fri Apr  7 14:53:10 2017\nFRED took 52.511174 seconds"),$("#view-fred-out-lsdtm-script").text("cat "+h+"/OUT/out1.txt"),$("#example-view-fred-out-lsdtm-script").text("-bash-4.2$ cat /home/"+g+"/OUT/out1.txt\nDay 0 Date 2012-01-02 WkDay Tue C 10 College 0 Cs 0 E 10 GQ 0 I 0 Is 0 M 0Military 0 N 2278377 Nursing_Home 0 P 10 Prison 0 R 0 S 2278367 Week 1 Year 2012 AR 0.00 ARs 0.00 RR 0.00\nDay 1 Date 2012-01-03 WkDay Wed C 0 College 0 Cs 1 E9 GQ 0 I 1 Is 1 M 0 Military 0 N 2278377 Nursing_Home 0 P 10 Prison 0 R 0 S 2278367 Week 1 Year 2012 AR 0.00 ARs 0.00 RR 0.00\n.\n.\n.\nDay 238 Date 2012-08-27WkDay Tue C 127 College 0 Cs 81 E 232 GQ 0 I 570 Is 376 M 0 Military 0 N 2278377 Nursing_Home 0 P 802 Prison 0 R 2904 S 2274671 Week 35 Year 2012 AR 0.23 ARs 0.14 RR 0.95\nDay 239 Date 2012-08-28 WkDay Wed C 108 College 0 Cs 75 E 228 GQ 0 I 593 Is 389 M 0 Military 0 N 2278377 Nursing_Home 0 P 821 Prison 0 R 2966 S 2274590 Week 35 Year 2012 AR 0.23 ARs 0.15 RR 1.20"),$("#lsdtm-script-container").show()}else $("#lsdtm-script-container").hide()}function sortSelect(a){var b=$(a+" option"),c=$(a).val();b.sort(function(a,b){return a.text>b.text?1:a.text<b.text?-1:0}),$(a).empty().append(b),$(a).val(c)}function checkLocationSelect(){""!=$("#location-select").val()?$("#synthpop-radios").children().each(function(a,b){var c=$(b).text();"Synthia"!=c&&$(b).removeAttr("disabled"),"SPEW"==c&&($(b).children().each(function(a,b){$(b).removeAttr("disabled"),$(b).click()}),drawDiagram())}):$("#synthpop-radios").children().each(function(a,b){var c=$(b).text();$(b).attr("disabled","disabled"),"SPEW"==c&&($(b).children().each(function(a,b){$(b).attr("disabled","disabled"),$(b).removeAttr("checked")}),drawDiagram())})}function copyToClipboard(a){var b=$("<textarea>");$("body").append(b),b.val($(a).text()).select(),document.execCommand("copy"),b.remove()}function download(a,b){var c=$(b).text(),d=document.createElement("a");d.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(c)),d.setAttribute("download",a),d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)}function toggleElementById(a,b){event.preventDefault();var c=$(b).text().indexOf("example")>-1;if($(a).is(":visible"))if($(a).fadeOut(),c)$(b).text("show example");else{$(b).toggleClass("glyphicon-minus glyphicon-plus"),$("#example-"+a.replace("#","")).fadeOut();var e="#span-a-"+a.replace("#","").replace("-code-block",""),f="#a-"+a.replace("#","").replace("-code-block","");$(e).hide(),$(f).text("show example")}else if($(a).fadeIn(),c)$(b).text("hide example");else{$(b).toggleClass("glyphicon-plus glyphicon-minus"),$("#example-"+a.replace("#","")).fadeOut();var e="#span-a-"+a.replace("#","").replace("-code-block","");$(e).show()}}function populateFieldValues(){var a=$("#field-select").val(),b=new Set;if($("#value-select").empty().append($("<option>",{value:"",text:""})),null!=a&&""!=a){for(var c=Object.keys(softwareDictionary),d=0;d<c.length;d++){var e=c[d];if("settings"!=e&&"Disease transmission models"==softwareDictionary[e].subtype)for(var f=0;f<softwareDictionary[e][a].length;f++){var g=softwareDictionary[e][a][f];"N/A"!=g&&b.add(g.toLowerCase())}}for(var h=Array.from(b).sort(),d=0;d<h.length;d++)$("#value-select").append($("<option>",{value:h[d],text:toTitleCase(h[d])}))}}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function unCamelCase(a){return a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(a){return a.toUpperCase()})}function changeQueryCategory(){var a=$("#category-select").val();null!=a&&""!=a?("software"==a?$("#human-readable-query-text").html("Find every entry in the <i>"+toTitleCase(a)+"</i> category in the MDC."):$("#human-readable-query-text").html("Find every entry classified as <i>"+toTitleCase(a).slice(0,-1)+"</i> in the <i>Software</i> category in the MDC."),$("#human-readable-query").show()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide())}function changeQueryField(){var a=$("#field-select").val(),b=$("#value-select").val(),c=$("input[name=fieldOperator]:checked").val();null!=a&&""!=a?null!=c&&""!=c&&"hasValue"==c?($("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC that has the <i>"+unCamelCase(a)+"</i> field."),$("#human-readable-query").show()):null!=c&&""!=c&&null!=b&&""!=b?("equals"==c?$("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC whose <i>"+unCamelCase(a)+"</i> is <i>"+toTitleCase(b)+"</i>."):$("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC that contains a <i>"+unCamelCase(a)+"</i> of <i>"+toTitleCase(b)+"</i>."),$("#human-readable-query").show()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide())}function getNumConstraints(){return $("#constraints-listed li").size()}function removeConstraint(a){$(a).closest("li").remove(),0==getNumConstraints()&&($("#constraints-listed").hide(),$("#no-constraints-listed").show(),$("#run-query").hide())}function addConstraintToList(){if(removeDuplicateError(),""!=$("#human-readable-query-text").html()){var a=$("#human-readable-query-text").html()+' <button class="btn btn-default btn-xs" onclick="removeConstraint(this)">Delete</button>',b=!1;if($("#constraints-listed li").each(function(c){$(this).html()==a&&(b=!0)}),b)$("#human-readable-query").addClass("error-color"),$("#human-readable-query-feedback").text("Error: Duplicate constraint.");else{$("#constraints-listed").append($("<li>",{html:a}));getNumConstraints()>0&&($("#no-constraints-listed").hide(),$("#constraints-listed").show(),$("#run-query").show())}}else{var d=$("#category-select-container"),e=$("#field-select-container"),f=$("#value-select-container");if(d.is(":visible")){var g=$("#category-select").val();null!=g&&""!=g||(d.addClass("has-error"),$("#category-select-feedback").text("Error: Please select a category."))}else if(e.is(":visible")){var h=$("#field-select").val(),i=$("#value-select").val();null!=h&&""!=h||(e.addClass("has-error"),$("#field-select-feedback").text("Error: Please select a field.")),null!=i&&""!=i||(f.addClass("has-error"),$("#value-select-feedback").text("Error: Please select a value."))}}}function removeDuplicateError(){$("#human-readable-query").removeClass("error-color"),$("#human-readable-query-feedback").text("")}function removeError(a){$("#"+a+"-container").removeClass("has-error"),$("#"+a+"-feedback").text("")}function removeErrors(){removeError("category-select"),removeError("field-select"),removeError("value-select"),removeDuplicateError()}function toggleModalView(){$("#modal-html").hasClass("active")?($("#modal-code-block").css("max-height",$("#modal-html").height()-25+"px"),$("#modal-json-link").click(),$("#modal-switch-btn").text("Switch to HTML View")):($("#modal-html-link").click(),$("#modal-switch-btn").text("Switch to Metadata View"))}function openUrl(a){event.preventDefault();var b=$(a)[0].href;b.search("apolloLibraryViewer")>-1?$(location).attr("href",ctx+"/midas-sso/view?url="+encodeURIComponent(b)):$(location).attr("href",b)}function addConstraint(){if($("#new-constraint-1").is(":visible")){var a=$('div[id^="new-constraint-"]:last'),b=parseInt(a.prop("id").match(/\d+/g),10)+1;$("#constraint-operator-1-2").is(":visible")?$("#constraints-container").append($("#constraint-operator-1-2").clone().prop("id","constraint-operator-"+(b-1)+"-"+b)):$("#constraint-operator-1-2").show(),$("#constraints-container").append(a.clone().prop("id","new-constraint-"+b)),$("#new-constraint-"+b+" .constraint-header").text("Constraint #"+b)}else $("#new-constraint-1").show()}function deleteConstraint(a){var b=$(a).parent().parent().parent().parent()[0],c=b.id,d=c.split("-"),e=parseInt(d[d.length-1]),f=$('div[id^="new-constraint-"]').length;if(1==e&&1==f)$("#new-constraint-"+e).hide(),$("#constraint-operator-1-2").hide();else{var g="#constraint-operator-"+(e-1)+"-"+e;e%2!=0&&(g="#constraint-operator-"+e+"-"+(e+1)),$(g).remove(),$("#new-constraint-"+e).remove()}reindexConstraints()}function reindexConstraints(){for(var a=$('div[id^="new-constraint-"]'),b=$('div[id^="constraint-operator-"]'),c=0;c<a.length;c++)$(a[c]).prop("id","new-constraint-"+(c+1)),$("#new-constraint-"+(c+1)+" .constraint-header").text("Constraint #"+(c+1));for(var c=0;c<b.length;c++)$(b[c]).prop("id","constraint-operator-"+(c+1)+"-"+(c+2))}var dataAugmentedPublications=[],software=[],softwareDictionary={},softwareSettings={},systemsSoftware=[],systemsSoftwareDictionary={},systemsSoftwareSettings={},diseaseTransmissionModel=[],diseaseTransmissionModelDictionary={},diseaseTransmissionModelSettings={},modelingPlatforms=[],modelingPlatformsDictionary={},modelingPlatformsSettings={},statisticalAnalysis=[],statisticalAnalysisDictionary={},statisticalAnalysisSettings={},imageManipulation=[],imageManipulationDictionary={},imageManipulationSettings={},webservices=[],webservicesDictionary={},webservicesSettings={},dataFormats=[],dataFormatsDictionary={},dataFormatsSettings={},geneticSequence=[],geneticSequenceDictionary={},geneticSequenceSettings={},countryHash={},stateHash={"01":"Alabama","02":"Alaska","04":"Arizona","05":"Arkansas","06":"California","08":"Colorado","09":"Connecticut",10:"Delaware",11:"District Of Columbia",12:"Florida",13:"Georgia",15:"Hawaii",16:"Idaho",17:"Illinois",18:"Indiana",19:"Iowa",20:"Kansas",21:"Kentucky",22:"Louisiana",23:"Maine",24:"Maryland",25:"Massachusetts",26:"Michigan",27:"Minnesota",28:"Mississippi",29:"Missouri",30:"Montana",31:"Nebraska",32:"Nevada",33:"New Hampshire",34:"New Jersey",35:"New Mexico",36:"New York",37:"North Carolina",38:"North Dakota",39:"Ohio",40:"Oklahoma",41:"Oregon",42:"Pennsylvania",44:"Rhode Island",45:"South Carolina",46:"South Dakota",47:"Tennessee",48:"Texas",49:"Utah",50:"Vermont",51:"Virginia",53:"Washington",54:"West Virginia",55:"Wisconsin",56:"Wyoming"},fipsCodes=Object.keys(stateHash),syntheticEcosystemsDictionary={},epidemicsDictionary={},synthiaPopulationsDictionary={};populateSyntheticEcosystemDictionary(0),populateSynthiaPopulationsDictionary(0),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)});var standardIdentifierTree={text:"Standard identifiers",nodes:[{text:"<span onmouseover='toggleTitle(this)'>LOINC codes (for lab tests)</span>",url:"http://loinc.org/"},{text:"<span onmouseover='toggleTitle(this)'>NCBI Taxon identifiers (for host and pathogen taxa)</span>",url:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi"},{text:"<span onmouseover='toggleTitle(this)'>RxNorm codes (for drugs)</span>",url:"https://www.nlm.nih.gov/research/umls/rxnorm/"},{text:"<span onmouseover='toggleTitle(this)'>SNOMED CT codes (for diagnoses)</span>",url:"https://nciterms.nci.nih.gov/ncitbrowser/pages/vocabulary.jsf?dictionary=SNOMED%20Clinical%20Terms%20US%20Edition"},{text:"<span onmouseover='toggleTitle(this)'>Vaccine Ontology identifiers (for vaccines)</span>",url:"http://www.violinet.org/vaccineontology/"},{text:"<span onmouseover='toggleTitle(this)'>Apollo Location Codes (for locations) <b><i class='sso-color'><sup>SSO</sup></i></b></span>",url:"https://betaweb.rods.pitt.edu/ls"}]};$("#commons-body").on("click",function(a){"bs-popover"!==$(a.target).attr("class")&&($("[rel=popover]").not(a.target).popover("destroy"),$(".popover").remove()),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})}),$(document).ready(function(){if(location.hash){$("a[href='"+location.hash+"']").tab("show"),"#workflows"==location.hash?setTimeout(function(){drawDiagram()},300):"#modal-json"==location.hash&&($("#modal-html-link").click(),location.hash="_");var a=$("a[href='"+location.hash+"']").text();""==a&&(a="Data-augmented Publication"),ga("send",{hitType:"pageview",page:location.pathname,title:a}),location.hash.includes("publication")&&$("#content-tab").addClass("highlighted-item")}else ga("send",{hitType:"pageview",page:location.pathname,title:"Content"});$(document.body).on("click","a[data-toggle]",function(a){location.hash=this.getAttribute("href"),ga("send",{hitType:"pageview",page:location.pathname,title:$(this).text()})}),$(document.body).on("click","a",function(a){var b=this.getAttribute("href");b.includes("http")&&ga("send",{hitType:"event",eventCategory:"Clickthrough",eventAction:b})})}),$(window).on("popstate",function(){var a=location.hash||$("a[data-toggle='tab']").first().attr("href");$("a[href='"+a+"']").tab("show"),location.hash.includes("publication")?$("#content-tab").addClass("highlighted-item"):$("#content-tab").removeClass("highlighted-item")}),window.onload=init,$("#pageModal").on("hidden.bs.modal",function(){$("#modal-switch-btn").text("Switch to Metadata View"),$("#modal-html-link").click(),location.hash="_"});