function hardcodeFromJson(a,b,c,d,e,f,g){$.getJSON(a+b+"?v="+Date.now(),function(b){e=b.settings;var h=e.name,i=e.directories;addTreeDirectories(i,c),addTreeNodes(h,b,d,c),buildBootstrapTree(h,a,c,f,g,d),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})})}function addTreeDirectories(a,b){for(var c=0;c<a.length;c++)if("string"==typeof a[c])b.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+a[c]+"</span>",nodes:[],name:a[c]});else{for(var d=Object.keys(a[c]),e=d[0],f=[],g=0;g<a[c][e].length;g++)f.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+a[c][e][g],nodes:[],name:a[c][e][g]});b.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+e+"</span>",nodes:f,name:e})}}function addTreeNodes(a,b,c,d){for(var e in b)if(c[e]=b[e],"directory"in c[e])addNodesToDirectory(a,e,d,c);else if("settings"!=e&&"EpiCaseMap"!=e){var f=getNodeData(a,e,c);f.nodes=[],d.push(f)}}function buildBootstrapTree(a,b,c,d,e,f){for(var g=0;g<c.length;g++)"nodes"in c[g]&&c[g].nodes.sort(compareNodes);"software"!=a&&c.sort(compareNodes);var h={data:c,showBorder:!1,collapseAll:!0,expandIcon:"glyphicon glyphicon-chevron-right",collapseIcon:"glyphicon glyphicon-chevron-down",onNodeSelected:function(a,c){void 0!=typeof c.nodes&&$(d).treeview("toggleNodeExpanded",[c.nodeId,{levels:1,silent:!0}]).treeview("unselectNode",[c.nodeId,{silent:!0}]);var f=$.parseJSON(sessionStorage.getItem(e));if(c.state.expanded){if(null!=f){var g=f.indexOf(c.nodeId);g>-1&&f.splice(g,1)}}else if(null!=f){var g=f.indexOf(c.nodeId);g<=-1&&f.push(c.nodeId)}else f=[],f.push(c.nodeId);sessionStorage.setItem(e,JSON.stringify(f)),null!=c.url&&1==c.state.selected&&("midasSso"in c&&1==c.midasSso?$(location).attr("href",b+"/midas-sso/view?url="+encodeURIComponent(c.url)):window.location.href=c.url)}};"diseaseTransmissionModels"==a||"systemSoftware"==a||"tools"==a?(h.expandIcon="bullet-point\t",h.collapseIcon="bullet-point\t",h.highlightSelected=!1,h.onNodeSelected=function(a,b){$('[data-toggle="tooltip"]').tooltip("destroy"),a.stopPropagation()},$(d).treeview(h),$(d).treeview("expandAll",{silent:!0})):("webServices"==a&&(h.expandIcon="bullet-point\t",h.collapseIcon="bullet-point\t"),$(d).treeview(h),$(d).treeview("collapseAll",{silent:!0}));var i=$.parseJSON(sessionStorage.getItem(e)),j=[];if(null==i&&"settings"in f){for(var k=f.settings.openDirectories,l=[],g=0;g<k.length;g++){var m=$(d).treeview("search",[k[g],{ignoreCase:!1,exactMatch:!1,revealResults:!1}])[0];$(d).treeview("clearSearch"),null!=m&&l.push(m.nodeId)}i=l,sessionStorage.setItem(e,JSON.stringify(l))}if(null!=i){for(var g=0;g<i.length;g++)try{$(d).treeview("expandNode",[i[g],{silent:!0}])}catch(a){j.push(g)}if(j.length>0){for(var g=0;g<j.length;g++)i.splice(j[g],1);sessionStorage.setItem(e,JSON.stringify(i))}}}function addNodesToDirectory(a,b,c,d){for(var e=0;e<c.length;e++){var f=[],g=[];addNodesToSubdirectories(c[e],f,g);var h=f.indexOf(d[b].directory);if(c[e].name==d[b].directory||h>-1){var i=getNodeData(a,b,d);h>-1?(g[h].nodes.push(i),g[h].nodes.sort(compareNodes)):c[e].nodes.push(i);break}}}function addNodesToSubdirectories(a,b,c){if("nodes"in a)for(var d in a.nodes)"nodes"in a.nodes[d]&&(b.push(a.nodes[d].name),c.push(a.nodes[d]))}function getNodeData(a,b,c){var d=b;"version"in c[b]?d=getSoftwareTitle(b,c[b].version):d.includes("/")&&"software"!=a&&"webServices"!=a;var e={text:'<span onmouseover="toggleTitle(this)" onclick="openModal(\''+a+"','"+b+"')\">"+d+"</span>",name:b};if("isApolloEnabled"in c[b]&&1==c[b].isApolloEnabled&&(e.text+=' <b><i class="ae-color"><sup>AE</sup></i></b>'),"isOlympus"in c[b]&&1==c[b].isOlympus&&(e.text+=' <b><i class="olympus-color"><sup>RROO</sup></i></b>'),"redirect"in c[b]&&1==c[b].redirect){var f="";"source"in c[b]&&(f=c[b].source),"location"in c[b]&&(f=c[b].location),f.length>0&&(e.url=f,e.text='<span onmouseover="toggleTitle(this)">'+d+"</span>","isApolloEnabled"in c[b]&&1==c[b].isApolloEnabled&&(e.text+=' <b><i class="ae-color"><sup>AE</sup></i></b>'),"isOlympus"in c[b]&&1==c[b].isOlympus&&(e.text+=' <b><i class="olympus-color"><sup>RROO</sup></i></b>'),"midasSso"in c[b]&&1==c[b].midasSso&&(e.text+=' <b><i class="sso-color"><sup>SSO</sup></i></b>',e.midasSso=c[b].midasSso))}return"software"!=a&&"webServices"!=a&&(e.text="<span data-placement='auto right' data-container='body' data-toggle='tooltip' title='"+c[b].description+"'>"+d+"</span>"),e}function getSoftwareTitle(a,b){var c=a;return b=b.split(" - ")[0],c+=isNaN(b[0])?" - "+b:" - v"+b}function getDataAndKnowledgeTree(a,b,c,d){var e=[];return c+="main/",e.push(b,{text:"Synthia synthetic populations",nodes:[{text:"2010 U.S. Synthetic Populations by County",url:"http://www.epimodels.org/drupal/?q=node/81"},{text:"2010 U.S. Synthetic Populations by State",url:"http://www.epimodels.org/drupal/?q=node/80"}]},{text:"Disease surveillance data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>Brazil Ministry of Health</span>",url:"http://www2.datasus.gov.br/DATASUS/index.php?area=0203"},{text:"<span onmouseover='toggleTitle(this)'>CDCEpi Zika Github</span>",url:"https://zenodo.org/record/192153#.WIEKNLGZNcA"},{text:"<span onmouseover='toggleTitle(this)'>Colombia Ministry of Health</span>",url:"http://www.ins.gov.co/lineas-de-accion/Subdireccion-Vigilancia/sivigila/Paginas/vigilancia-rutinaria.aspx"},{text:"<span onmouseover='toggleTitle(this)'>Singapore Ministry of Health</span>",url:"https://www.moh.gov.sg/content/moh_web/home/diseases_and_conditions.html"},{text:"<span onmouseover='toggleTitle(this)'>US notifiable diseases</span>",nodes:[{text:"<span onmouseover='toggleTitle(this)'>MMWR morbidity and mortality tables through data.cdc.gov</span>",url:"https://data.cdc.gov/browse?category=MMWR"},{text:"<span onmouseover='toggleTitle(this)'>Tycho level 1</span>",url:"https://www.tycho.pitt.edu/data/level1.php"},{text:"<span onmouseover='toggleTitle(this)'>Tycho level 2</span>",url:"https://www.tycho.pitt.edu/data/level2.php"}]}]},{text:"Mortality data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US cause of death 1995-2015</span>",url:"https://wonder.cdc.gov/controller/datarequest/D76"},{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US compressed mortality files</span>",url:"https://wonder.cdc.gov/mortSQL.html"}]}),null!=a&&$.each(a,function(a,b){var d;d=a.includes("Epidemic")?c+"epidemic/":a.includes("Case series")?c+"caseSeries/":c+"infectiousDiseaseScenario/";var f=[];$.each(b,function(a,b){var c=[];$.each(b,function(a,b){c.push({text:"<span>"+b.name+" <b><i class=\"ae-color\"><sup>AE</sup></i><b> <b><i class='sso-color'><sup>SSO</sup></i></b></span> ",url:d+b.urn})}),(a.includes("Zika")||a.includes("Chikungunya"))&&(a+=" (under development)"),a.includes("H1n1 infectious disease scenarios")&&(a="H1N1 infectious disease scenarios"),f.push({text:a+" <b><i class=\"ae-color\"><sup>AE</sup></i><b> <b><i class='sso-color'><sup>SSO</sup></i></b><span>",nodes:c})}),e.push({text:a,nodes:f})}),e.push(standardEncodingTree),e}function openViewer(a){window.open(a)}function toggleModalItem(a,b,c,d,e){a in b?($("#software-"+c+"-container").show(),e?$("#software-"+c).html(b[a]):$("#software-"+c).text(b[a]),d&&$("#software-"+c).attr("href",b[a])):$("#software-"+c+"-container").hide()}function toggleRequiredModalItem(a,b,c,d,e,f,g){a in b?($("#software-"+c+"-container").show(),e?$("#software-"+c).html(b[a]):$("#software-"+c).text(b[a]),d&&$("#software-"+c).attr("href",b[a])):"software"==f?($("#software-"+c+"-container").show(),"Disease transmission models"!=b.directory||"dataInputFormats"!=a&&"dataOutputFormats"!=a?$("#software-"+c).html("N/A"):$("#software-"+c).html("Proprietary")):$("#software-"+c+"-container").hide()}function openModal(a,b){var c={};"software"==a?c=softwareDictionary[b]:"webServices"==a&&(c=webservicesDictionary[b]),null!=b?($("#software-name").show(),"version"in c?$("#software-name").text(getSoftwareTitle(b,c.version)):$("#software-name").text(b)):$("#software-name").hide(),"developer"in c?($("#software-developer-container").show(),$("#software-developer").text(c.developer),c.developer.includes(",")?$("#software-developer-tag").text("Developers:"):$("#software-developer-tag").text("Developer:")):$("#software-developer-container").hide(),"version"in c?($("#software-version-container").show(),$("#software-version").text(c.version),c.version.includes(",")&&"software"==a?$("#software-version-tag").text("Software versions:"):$("#software-version-tag").text("Software version:"),c.version.includes(",")&&"webServices"==a?$("#software-version-tag").text("Versions:"):$("#software-version-tag").text("Version:")):$("#software-version").text("N/A"),toggleRequiredModalItem("doi",c,"doi",!1,!0,a),toggleRequiredModalItem("dataInputFormats",c,"data-input-formats",!1,!1,a,!0),toggleRequiredModalItem("dataOutputFormats",c,"data-output-formats",!1,!1,a,!0),toggleModalItem("type",c,"type",!1,!1),toggleModalItem("populationSpecies",c,"population-species",!1,!1),toggleModalItem("location",c,"location",!0,!1),toggleModalItem("source",c,"source-code",!0,!1),toggleModalItem("diseaseCoverage",c,"disease-coverage",!1,!1),toggleModalItem("locationCoverage",c,"location-coverage",!1,!1),toggleModalItem("speciesIncluded",c,"species-included",!1,!1),toggleModalItem("hostSpeciesIncluded",c,"host-species-included",!1,!1),toggleModalItem("controlMeasures",c,"control-measures",!1,!1),toggleModalItem("title",c,"title",!1,!1),toggleModalItem("generalInfo",c,"general-info",!1,!0),toggleModalItem("sourceCodeRelease",c,"source-code-release",!1,!0),toggleModalItem("publicationsAboutRelease",c,"publications-about-release",!1,!0),toggleModalItem("publicationsThatUsedRelease",c,"publications-that-used-release",!1,!0),toggleModalItem("webApplication",c,"web-application",!0,!1),toggleModalItem("userGuidesAndManuals",c,"user-guides-and-manuals",!0,!1),toggleModalItem("executables",c,"executables",!1,!0),toggleModalItem("license",c,"license",!1,!0),toggleModalItem("endpointPrefix",c,"end-point-prefix",!0,!1),toggleModalItem("documentation",c,"documentation",!1,!0),toggleModalItem("restDocumentation",c,"rest-documentation",!0,!1),toggleModalItem("soapDocumentation",c,"soap-documentation",!0,!1),toggleModalItem("soapEndpoint",c,"soap-endpoint",!0,!1),toggleModalItem("projectSource",c,"project-source-code",!0,!1),toggleModalItem("soapSource",c,"rest-source-code",!0,!1),toggleModalItem("restSource",c,"soap-source-code",!0,!1),toggleModalItem("exampleQueries",c,"example-queries",!1,!0),toggleModalItem("diseases",c,"diseases",!1,!1),toggleModalItem("region",c,"region",!1,!0),toggleModalItem("outcomes",c,"outcomes",!1,!0),toggleModalItem("forecasts",c,"forecasts",!1,!0),toggleModalItem("nowcasts",c,"nowcasts",!1,!0),toggleModalItem("challengeSite",c,"challenge-site",!0,!1),toggleModalItem("site",c,"site",!0,!1),toggleModalItem("forecastFrequency",c,"forecast-frequency",!1,!1),toggleModalItem("visualizationType",c,"visualization-type",!1,!1),toggleModalItem("grant",c,"grant",!1,!1),toggleModalItem("platform",c,"platform",!1,!1),$("#pageModal").modal("show")}function formatLocation(a){if(a.includes("_"))var b=a.split("_");else var b=a.split(" ");for(var c=0;c<b.length;c++){var d=0;"("==b[c].charAt(0)&&(d=1),"of"!=b[c].replace(/["'\(\)]/g,"")&&(b[c]=b[c].charAt(d).toUpperCase()+b[c].slice(d+1),1==d&&(b[c]="("+b[c]))}return b.join(" ")}function openSoftwareInfo(a,b){location.href=a+"/main/software/"+b}function openLibraryFrame(a){document.getElementById("libraryFrame").parentNode.style.display="",document.getElementById("commons-main-body").style.display="none",document.getElementById("commons-main-tabs").style.display="none",window.open(a,"libraryFrame")}function collapsableNode(a,b,c){var d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return'<div id="'+d+'-panel" class="panel panel-default" style="margin-bottom: 0"><div class="panel-heading" role="tab" id="'+d+'-heading" style="padding:1px 3px"><span class="panel-title" style="font-size:12px;"><a role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="'+d+'-collapse" style="text-decoration: none">'+b+'</a></span></div><div id="'+d+'-collapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="'+d+'-heading"><div class="panel-body" style="padding:1px 3px; font-size:12px">'+c+'<img src = "'+a+'/resources/img/fred.png" style="max-width:100%; max-height:100%;"></div></div></div><script>$("#'+d+'-panel").hover(function() {$("#'+d+'-collapse").collapse("show");}, function() {$("#'+d+'-collapse").collapse("hide");}); </script>'}function getPopover(a,b,c,d){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}),f="'<img src = \""+a+'" id = "'+e+'-img" style="max-width:100%; min-height:150px">\'';return'<span id="'+e+'" class="bs-popover">'+b+'</span><script>$("#'+e+'-img").click(function(){openModal("'+d+'")});$("#'+e+'").popover({container: "body", html: true, trigger: "click", content: function() {return '+f+'}}).on("show.bs.popover", function(e){$("[rel=popover]").not(e.target).popover("destroy");$(".popover").remove();});</script>'}function compareNodes(a,b){return a.name.trim().toLowerCase()<b.name.trim().toLowerCase()?-1:a.name.trim().toLowerCase()>b.name.trim().toLowerCase()?1:0}function toggleTitle(a){var b=$(a);b[0].parentNode.offsetWidth<b[0].parentNode.scrollWidth||b[0].offsetWidth<b[0].scrollWidth?b.attr("title",b.text()):b.attr("title","")}function activeTab(a){$('.tabs a[href="#'+a+'"]').tab("show"),location.hash=a,a.includes("publication")?$("#data-and-knowledge-tab").addClass("highlighted-item"):$("#data-and-knowledge-tab").removeClass("highlighted-item")}function getWebServicesTreeview(){var a=[];return a.push({text:"WebServices placeholder",nodes:[]}),a}function getSoftwareEnvironmentTreeview(){var a=[];return a.push({text:"Software environment placeholder",nodes:[]}),a}function getDiseaseTransmissionModelTreeview(){var a=[];return a.push({text:"Disease transmission model placeholder",nodes:[]}),a}function getToolsTreeview(){var a=[];return a.push({text:"Statistical analysis software"},{text:"Image manipulation"}),a}function init(){for(var a=document.getElementsByTagName("iframe"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}var dataAugmentedPublications=[],software=[],softwareDictionary={},softwareSettings={},systemsSoftware=[],systemsSoftwareDictionary={},systemsSoftwareSettings={},diseaseTransmissionModel=[],diseaseTransmissionModelDictionary={},diseaseTransmissionModelSettings={},modelingPlatforms=[],modelingPlatformsDictionary={},modelingPlatformsSettings={},statisticalAnalysis=[],statisticalAnalysisDictionary={},statisticalAnalysisSettings={},imageManipulation=[],imageManipulationDictionary={},imageManipulationSettings={},webservices=[],webservicesDictionary={},webservicesSettings={};String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1});var standardEncodingTree={text:"Standards for encoding data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>LOINC codes (for lab tests)</span>",url:"http://loinc.org/"},{text:"<span onmouseover='toggleTitle(this)'>NCBI Taxon identifiers (for host and pathogen taxa)</span>",url:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi"},{text:"<span onmouseover='toggleTitle(this)'>RxNorm codes (for drugs)</span>",url:"https://www.nlm.nih.gov/research/umls/rxnorm/"},{text:"<span onmouseover='toggleTitle(this)'>SNOMED CT codes (for diagnoses)</span>",url:"https://nciterms.nci.nih.gov/ncitbrowser/pages/vocabulary.jsf?dictionary=SNOMED%20Clinical%20Terms%20US%20Edition"},{text:"<span onmouseover='toggleTitle(this)'>Vaccine Ontology identifiers (for vaccines)</span>",url:"http://www.violinet.org/vaccineontology/"},{text:"<span onmouseover='toggleTitle(this)'>Apollo XSD (for standard data types)</span>",url:"https://github.com/ApolloDev/apollo-xsd-and-types"},{text:"<span onmouseover='toggleTitle(this)'>Apollo Location Codes (for locations) <b><i class='sso-color'><sup>SSO</sup></i></b></span>",url:"https://betaweb.rods.pitt.edu/ls"}]};$("#commons-body").on("click",function(a){"bs-popover"!==$(a.target).attr("class")&&($("[rel=popover]").not(a.target).popover("destroy"),$(".popover").remove()),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})}),$(document).ready(function(){location.hash&&($("a[href='"+location.hash+"']").tab("show"),location.hash.includes("publication")&&$("#data-and-knowledge-tab").addClass("highlighted-item")),$(document.body).on("click","a[data-toggle]",function(a){location.hash=this.getAttribute("href")})}),$(window).on("popstate",function(){var a=location.hash||$("a[data-toggle='tab']").first().attr("href");$("a[href='"+a+"']").tab("show")}),window.onload=init;