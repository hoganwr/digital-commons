function getSoftwareTitle(a,b){var c=a;return b=b.split(" - ")[0],c+=isNaN(b[0])?" - "+b:" - v"+b}function hardcodeSoftwareFromJson(a,b){$.getJSON(a+b,function(b){softwareSettings=b.settings;for(var c=softwareSettings.directories,d=0;d<c.length;d++)if("string"==typeof c[d])software.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+c[d]+"</span>",nodes:[],name:c[d]});else{for(var e=Object.keys(c[d]),f=e[0],g=[],h=0;h<c[d][f].length;h++)g.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+c[d][f][h]+"</span>",nodes:[],name:c[d][f][h]});software.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+f+"</span>",nodes:g,name:f})}for(var i in b)if(softwareDictionary[i]=b[i],"directory"in softwareDictionary[i])for(var d=0;d<software.length;d++){var j=[],k=[];if("nodes"in software[d])for(var h in software[d].nodes)"nodes"in software[d].nodes[h]&&(j.push(software[d].nodes[h].name),k.push(software[d].nodes[h]));var l=j.indexOf(softwareDictionary[i].directory);if(software[d].name==softwareDictionary[i].directory||l>-1){var m=i;"version"in softwareDictionary[i]&&(m=getSoftwareTitle(i,softwareDictionary[i].version));var n={text:'<span onmouseover="toggleTitle(this)" onclick="openModal(\''+i+"')\">"+m+"</span>",name:i};if("redirect"in softwareDictionary[i]&&1==softwareDictionary[i].redirect){var o="";"source"in softwareDictionary[i]&&(o=softwareDictionary[i].source),"location"in softwareDictionary[i]&&(o=softwareDictionary[i].location),o.length>0&&(n.url=o,n.text='<span onmouseover="toggleTitle(this)">'+m+"</span>","midasSso"in softwareDictionary[i]&&1==softwareDictionary[i].midasSso&&(n.midasSso=softwareDictionary[i].midasSso))}l>-1?(k[l].nodes.push(n),k[l].nodes.sort(compareNodes)):software[d].nodes.push(n);break}}buildSoftwareTree(a)})}function hardcodeSoftware(){for(var a=0;a<software[2].nodes.length;a++)if("GLEAMViz"==software[2].nodes[a].name){delete software[2].nodes[a];break}software.splice(1,0,{text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>Population dynamics models</span>",nodes:[],name:"Population dynamics models"}),software.splice(6,0,{text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>Modeling platforms</span>",nodes:[],name:"Modeling platforms"})}function buildSoftwareTree(a){for(var b=0;b<software.length;b++)software[b].nodes.sort(compareNodes);$("#algorithm-treeview").treeview({data:software,showBorder:!1,collapseAll:!0,expandIcon:"glyphicon glyphicon-chevron-right",collapseIcon:"glyphicon glyphicon-chevron-down",onNodeSelected:function(b,c){if(void 0!=typeof c.nodes&&$("#algorithm-treeview").treeview("toggleNodeExpanded",[c.nodeId,{levels:1,silent:!0}]).treeview("unselectNode",[c.nodeId,{silent:!0}]),null==c.parentId){var d=$.parseJSON(sessionStorage.getItem("expandedSoftware"));if(c.state.expanded){if(null!=d){var e=d.indexOf(c.nodeId);e>-1&&d.splice(e,1)}}else if(null!=d){var e=d.indexOf(c.nodeId);e<=-1&&d.push(c.nodeId)}else d=[],d.push(c.nodeId);sessionStorage.setItem("expandedSoftware",JSON.stringify(d))}null!=c.url&&1==c.state.selected&&("midasSso"in c&&1==c.midasSso?$(location).attr("href",a+"/main/view?url="+encodeURIComponent(c.url)):window.location.href=c.url)}});$("#algorithm-treeview").treeview("collapseAll",{silent:!0});var d=$.parseJSON(sessionStorage.getItem("expandedSoftware")),e=[];if(null==d){for(var f=softwareDictionary.settings.openDirectories,g=[],b=0;b<f.length;b++){var h=$("#algorithm-treeview").treeview("search",[f[b],{ignoreCase:!1,exactMatch:!1,revealResults:!1}])[0];$("#algorithm-treeview").treeview("clearSearch"),g.push(h.nodeId)}d=g,sessionStorage.setItem("expandedSoftware",JSON.stringify(g))}if(null!=d){for(var b=0;b<d.length;b++)try{$("#algorithm-treeview").treeview("expandNode",[d[b],{silent:!0}])}catch(a){e.push(b)}if(e.length>0){for(var b=0;b<e.length;b++)d.splice(e[b],1);sessionStorage.setItem("expandedSoftware",JSON.stringify(d))}}}function getDataAndKnowledgeTree(a,b,c,d){var e=[];return c+="main/",e.push({text:"Disease surveillance data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>Brazil Ministry of Health routine diseases surveillance databases</span>",url:"http://www2.datasus.gov.br/DATASUS/index.php?area=0203"},{text:"<span onmouseover='toggleTitle(this)'>CDCEpi Zika Github</span>",url:"https://zenodo.org/record/192153#.WIEKNLGZNcA"},{text:"<span onmouseover='toggleTitle(this)'>Colombia Ministry of Health routine disease surveillance tables</span>",url:"http://www.ins.gov.co/lineas-de-accion/Subdireccion-Vigilancia/sivigila/Paginas/vigilancia-rutinaria.aspx"},{text:"<span onmouseover='toggleTitle(this)'>Singapore Ministry of Health disease surveillance data</span>",url:"https://www.moh.gov.sg/content/moh_web/home/diseases_and_conditions.html"},{text:"<span onmouseover='toggleTitle(this)'>US notifiable diseases</span>",nodes:[{text:"<span onmouseover='toggleTitle(this)'>MMWR morbidity and mortality tables through data.cdc.gov</span>",url:"https://data.cdc.gov/browse?category=MMWR"},{text:"<span onmouseover='toggleTitle(this)'>Tycho level 1</span>",url:"https://www.tycho.pitt.edu/data/level1.php"},{text:"<span onmouseover='toggleTitle(this)'>Tycho level 2</span>",url:"https://www.tycho.pitt.edu/data/level2.php"}]}]},{text:"Mortality data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US cause of death 1995-2015</span>",url:"https://wonder.cdc.gov/controller/datarequest/D76"},{text:"<span onmouseover='toggleTitle(this)'>CDC WONDER US compressed mortality files</span>",url:"https://wonder.cdc.gov/mortSQL.html"}]}),null!=a&&$.each(a,function(a,b){var d;d=a.includes("Epidemic")?c+"epidemic/":a.includes("Case series")?c+"caseSeries/":c+"infectiousDiseaseScenario/";var f=[];$.each(b,function(a,b){var c=[];$.each(b,function(a,b){c.push({text:"<span>"+b.name+"<span>",url:d+b.urn})}),(a.includes("Zika")||a.includes("Chikungunya"))&&(a+=" (under development)"),a.includes("H1n1 infectious disease scenarios")&&(a="H1N1 infectious disease scenarios"),f.push({text:a,nodes:c})}),e.push({text:a,nodes:f})}),e.push(standardEncodingTree),e}function openViewer(a){window.open(a)}function toggleModalItem(a,b,c,d,e){a in b?($("#software-"+c+"-container").show(),e?$("#software-"+c).html(b[a]):$("#software-"+c).text(b[a]),d&&$("#software-"+c).attr("href",b[a])):$("#software-"+c+"-container").hide()}function openModal(a){var b=softwareDictionary[a];null!=a?($("#software-name").show(),"version"in b?$("#software-name").text(getSoftwareTitle(a,b.version)):$("#software-name").text(a)):$("#software-name").hide(),"developer"in b?($("#software-developer-container").show(),$("#software-developer").text(b.developer),b.developer.includes(",")?$("#software-developer-tag").text("Developers:"):$("#software-developer-tag").text("Developer:")):$("#software-developer-container").hide(),"doi"in b?($("#software-doi-container").show(),$("#software-doi").html(b.doi)):($("#software-doi-container").show(),$("#software-doi").html("N/A")),"version"in b?($("#software-version-container").show(),$("#software-version").text(b.version),b.version.includes(",")?$("#software-version-tag").text("Software versions:"):$("#software-version-tag").text("Software version:")):$("#software-version-container").hide(),toggleModalItem("type",b,"type",!1,!1),toggleModalItem("populationSpecies",b,"population-species",!1,!1),toggleModalItem("location",b,"location",!0,!1),toggleModalItem("source",b,"source-code",!0,!1),toggleModalItem("diseaseCoverage",b,"disease-coverage",!1,!1),toggleModalItem("locationCoverage",b,"location-coverage",!1,!1),toggleModalItem("speciesIncluded",b,"species-included",!1,!1),toggleModalItem("controlMeasures",b,"control-measures",!1,!1),toggleModalItem("title",b,"title",!1,!1),toggleModalItem("generalInfo",b,"general-info",!1,!0),toggleModalItem("sourceCodeRelease",b,"source-code-release",!1,!0),toggleModalItem("publicationsAboutRelease",b,"publications-about-release",!1,!0),toggleModalItem("publicationsThatUsedRelease",b,"publications-that-used-release",!1,!0),toggleModalItem("webApplication",b,"web-application",!0,!1),toggleModalItem("userGuidesAndManuals",b,"user-guides-and-manuals",!0,!1),toggleModalItem("executables",b,"executables",!1,!0),toggleModalItem("license",b,"license",!1,!0),toggleModalItem("documentation",b,"documentation",!1,!0),$("#pageModal").modal("show")}function formatLocation(a){if(a.includes("_"))var b=a.split("_");else var b=a.split(" ");for(var c=0;c<b.length;c++){var d=0;"("==b[c].charAt(0)&&(d=1),"of"!=b[c].replace(/["'\(\)]/g,"")&&(b[c]=b[c].charAt(d).toUpperCase()+b[c].slice(d+1),1==d&&(b[c]="("+b[c]))}return b.join(" ")}function openSoftwareInfo(a,b){location.href=a+"/main/software/"+b}function openLibraryFrame(a){document.getElementById("libraryFrame").parentNode.style.display="",document.getElementById("commons-main-body").style.display="none",document.getElementById("commons-main-tabs").style.display="none",window.open(a,"libraryFrame")}function collapsableNode(a,b,c){var d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return'<div id="'+d+'-panel" class="panel panel-default" style="margin-bottom: 0"><div class="panel-heading" role="tab" id="'+d+'-heading" style="padding:1px 3px"><span class="panel-title" style="font-size:12px;"><a role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="'+d+'-collapse" style="text-decoration: none">'+b+'</a></span></div><div id="'+d+'-collapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="'+d+'-heading"><div class="panel-body" style="padding:1px 3px; font-size:12px">'+c+'<img src = "'+a+'/resources/img/fred.png" style="max-width:100%; max-height:100%;"></div></div></div><script>$("#'+d+'-panel").hover(function() {$("#'+d+'-collapse").collapse("show");}, function() {$("#'+d+'-collapse").collapse("hide");}); </script>'}function getPopover(a,b,c,d){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}),f="'<img src = \""+a+'" id = "'+e+'-img" style="max-width:100%; min-height:150px">\'';return'<span id="'+e+'" class="bs-popover">'+b+'</span><script>$("#'+e+'-img").click(function(){openModal("'+d+'")});$("#'+e+'").popover({container: "body", html: true, trigger: "click", content: function() {return '+f+'}}).on("show.bs.popover", function(e){$("[rel=popover]").not(e.target).popover("destroy");$(".popover").remove();});</script>'}function compareNodes(a,b){return a.name.toLowerCase()<b.name.toLowerCase()?-1:a.name.toLowerCase()>b.name.toLowerCase()?1:0}function toggleTitle(a){var b=$(a);b[0].parentNode.offsetWidth<b[0].parentNode.scrollWidth||b[0].offsetWidth<b[0].scrollWidth?b.attr("title",b.text()):b.attr("title","")}function activeTab(a){$('.tabs a[href="#'+a+'"]').tab("show"),location.hash=a}var dataAugmentedPublications=[],software=[],isSoftwareHardcoded=!0,softwareDictionary={},softwareSettings={};String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1});var standardEncodingTree={text:"Standards for encoding data",nodes:[{text:"<span onmouseover='toggleTitle(this)'>Apollo location codes (for locations)</span>",url:"https://betaweb.rods.pitt.edu/ls"},{text:"<span onmouseover='toggleTitle(this)'>LOINC codes (for lab tests)</span>",url:"http://loinc.org/"},{text:"<span onmouseover='toggleTitle(this)'>NCBI Taxon identifiers (for host and pathogen taxa)</span>",url:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi"},{text:"<span onmouseover='toggleTitle(this)'>RxNorm codes (for drugs)</span>",url:"https://www.nlm.nih.gov/research/umls/rxnorm/"},{text:"<span onmouseover='toggleTitle(this)'>SNOMED CT codes (for diagnoses)</span>",url:"https://nciterms.nci.nih.gov/ncitbrowser/pages/vocabulary.jsf?dictionary=SNOMED%20Clinical%20Terms%20US%20Edition"},{text:"<span onmouseover='toggleTitle(this)'>Vaccine Ontology identifiers (for vaccines)</span>",url:"http://www.violinet.org/vaccineontology/"},{text:"<span onmouseover='toggleTitle(this)'>Apollo XSD (for standard data types)</span>",url:"https://github.com/ApolloDev/apollo-xsd-and-types"}]};